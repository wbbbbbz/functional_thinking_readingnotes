# 第二章

## 2.1 普通的例子

> 函数式编程希望在算法编写上给予程序员同样的帮助，一方面程序员得以在更高的抽象层次上工作，另一方面运行时也有了执行复杂优化的自由空间。开发者从中获得的好处体现在更低的复杂性和更高的性能，这点与垃圾收集相同，不过，函数式编程对个人的影响更直接，因为它改变的是你的解答思路。

- 命令式编程鼓励将操作安排在循环内部
  - 在循环中经常会完成：
    - filter
    - transform
    - convert
- 命令式必须依赖低层次机制（迭代）
- 函数式直接为这些操作提供了辅助手段
  - 关键概念：向函数式思维靠拢，关注更高层次的抽象，不要太拘泥于实现细节。
  - 好处：
    1. 找到问题共性
    2. 让Runtime做智能优化
    3. 更容易通过改变先后顺序（从而改变数据量）提升效率
    4. 不需要在低层次的迭代细节花太多时间
       - 比如Java多线程只要用parallelStream，Scala多线程只要用par即可
> 多从结果着眼，少纠结具体的步骤。

## 2.2 案例研究：完美数的分类问题

- 面向对象编程推荐维持内部状态，因为封装被OOP语言视为一项优势。状态的划分往往为一些工程实践提供了便利，比如单元测试的时候我们很容易注入各种取值。

- 向函数式编程靠拢：
  1. 去掉内部状态，使用参数代入
  2. 改为静态方法，重复利用。（一般来说，面向对象系统里粒度最小的重用单元是类，但是也可以在更小的单元上发生）